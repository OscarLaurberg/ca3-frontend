{"version":3,"sources":["config/settings.js","utils/apiUtils.js","utils/JwtTokenParser.js","hooks/useAuth.jsx","components/utils/ToggleContent.jsx","components/utils/Modal.jsx","components/Login.jsx","components/LoginModal.jsx","components/Header.jsx","components/NoMatch.jsx","contexts/StateContext.jsx","components/Content3.jsx","hooks/useFetch.jsx","components/Scrape.jsx","components/Jokes.jsx","components/Home.jsx","components/routes/ProtectedRoute.jsx","components/Unauthorized.jsx","config/Routes.jsx","App.js","index.js"],"names":["backendUrl","handleHttpErrors","res","ok","json","Promise","reject","status","fullError","apiUtils","fetchData","url","opts","a","fetch","makeOptions","method","body","token","headers","Accept","localStorage","getItem","JSON","stringify","getUserAndRoles","jwtTokenParsed","base64","split","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","parse","parseJwt","roles","username","authContext","createContext","useAuth","useContext","ProvideAuth","children","auth","useState","setRoles","jwtToken","setJwtToken","name","setName","isLoggedIn","setIsLoggedIn","isLoading","setIsLoading","history","useHistory","useEffect","user","authenticateRole","role","includes","signIn","password","options","setItem","then","e","alert","message","console","log","signOut","removeItem","push","useProvideAuth","Provider","value","ToggleContent","toggler","content","isVisible","setIsVisible","modalRoot","document","querySelector","Modal","hideModal","containerDiv","createElement","appendChild","addEventListener","keyCode","removeChild","createPortal","LogIn","loginCredentials","setLoginCredentials","Fragment","LoggedIn","handleLogout","LoggedOut","change","evt","target","id","performLogin","pass","preventDefault","onChange","TextField","size","label","variant","Button","color","onClick","LoginModal","togglerColor","show","btnTxt","loginBtn","hide","modalContent","Header","AppBar","position","Toolbar","IconButton","edge","component","NavLink","exact","to","aria-label","Typography","style","flex","noWrap","NoMatch","StateContext","defaultState","past","present","age","email","future","reducer","state","action","type","newPresent","payload","filter","obj","newPast","newFuture","StateProvider","useReducer","dispatch","stateObjects","addState","stateObject","RemoveState","undoState","redoState","isPast","length","isFuture","Content3","object","setObject","handleChange","disabled","index","key","useFetch","response","setResponse","error","setError","Scrape","Backdrop","open","CircularProgress","scrape","title","divCount","bodyCount","Jokes","joke1","joke1Reference","joke2","joke2Reference","Home","ProtectedRoute","authenticatedRoles","rest","render","location","some","r","indexOf","pathname","from","Unauthorized","Routes","path","App","Container","maxWidth","AppWithRouter","StrictMode","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.7641cbd9.chunk.js","sourcesContent":["// Has to the URL WITH(!!!) /api so fetches only needs /jokes /scrape whatever..\r\nexport const backendUrl = 'https://www.laurberg.codes/CA3backend/api';\r\n","import { backendUrl } from '../config/settings';\r\n\r\nconst handleHttpErrors = (res) => {\r\n  if (!res.ok) {\r\n    return Promise.reject({ status: res.status, fullError: res.json() });\r\n  }\r\n  return res.json();\r\n};\r\n\r\nconst makeOptions = (method, body = null, token = true) => {\r\n  const opts = {\r\n    method: method,\r\n    headers: {\r\n      'Content-type': 'application/json',\r\n      Accept: 'application/json'\r\n    }\r\n  };\r\n  if (token) {\r\n    opts.headers['x-access-token'] = localStorage.getItem('jwtToken');\r\n  }\r\n  if (body) {\r\n    opts.body = JSON.stringify(body);\r\n  }\r\n  return opts;\r\n};\r\n\r\nconst fetchData = async (url, opts) => {\r\n  const res = await fetch(`${backendUrl}${url}`, opts);\r\n  return handleHttpErrors(res);\r\n};\r\n\r\nexport const apiUtils = {\r\n  fetchData: fetchData,\r\n  handleHttpErrors: handleHttpErrors,\r\n  makeOptions: makeOptions\r\n};\r\n","const parseJwt = (token) => {\r\n  var base64Url = token.split('.')[1];\r\n  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n  var jsonPayload = decodeURIComponent(\r\n    atob(base64)\r\n      .split('')\r\n      .map(function(c) {\r\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n      })\r\n      .join('')\r\n  );\r\n  return JSON.parse(jsonPayload);\r\n};\r\n\r\nexport const getUserAndRoles = (token) => {\r\n  const jwtTokenParsed = parseJwt(token);\r\n  const roles = jwtTokenParsed.roles.split(',');\r\n  return {\r\n    username: jwtTokenParsed.username,\r\n    roles: roles\r\n  };\r\n};\r\n","import React, { useState, useContext, useEffect, createContext } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { apiUtils } from '../utils/apiUtils';\r\nimport { getUserAndRoles } from '../utils/JwtTokenParser';\r\n\r\nconst authContext = createContext();\r\n\r\n// Hook for child components to get the auth object ...\r\n// ... and re-render when it changes.\r\n// Returns the auth context..\r\nexport const useAuth = () => {\r\n  return useContext(authContext);\r\n};\r\n\r\nconst useProvideAuth = () => {\r\n  const [roles, setRoles] = useState(null);\r\n  const [jwtToken, setJwtToken] = useState();\r\n  const [name, setName] = useState(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    // Checks logged in\r\n    setJwtToken(localStorage.getItem('jwtToken'));\r\n    setIsLoggedIn(!!jwtToken);\r\n\r\n    // Set roles\r\n    if (jwtToken) {\r\n      const { username, roles } = getUserAndRoles(jwtToken);\r\n      setName(username);\r\n      setRoles(roles);\r\n    }\r\n  }, [jwtToken]);\r\n\r\n  const signIn = async (username, password) => {\r\n    const options = apiUtils.makeOptions('POST', {\r\n      username: username,\r\n      password: password\r\n    });\r\n\r\n    try {\r\n      setIsLoading(true);\r\n      const res = await apiUtils.fetchData('/login', options);\r\n      setName(res.username);\r\n      setJwtToken(res.token);\r\n      localStorage.setItem('jwtToken', res.token);\r\n      setRoles(res.roles);\r\n    } catch (error) {\r\n      if (error.status) {\r\n        error.fullError.then((e) => alert(e.message));\r\n      } else {\r\n        console.log('Network error');\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const signOut = () => {\r\n    setName(null);\r\n    setJwtToken(null);\r\n    localStorage.removeItem('jwtToken');\r\n    history.push('/');\r\n  };\r\n\r\n  const authenticateRole = (role) => {\r\n    return isLoggedIn && roles.includes(role);\r\n  };\r\n\r\n  // Return user object and auth methods\r\n  return {\r\n    user: {\r\n      name,\r\n      roles,\r\n      authenticateRole,\r\n      jwtToken,\r\n      isLoggedIn\r\n    },\r\n    signIn,\r\n    signOut,\r\n    isLoading\r\n  };\r\n};\r\n\r\n// In order to use the context, we have to provide it...\r\nconst ProvideAuth = ({ children }) => {\r\n  const auth = useProvideAuth();\r\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>;\r\n};\r\n\r\nexport default ProvideAuth;\r\n","import React, { useState } from 'react';\r\n\r\nconst ToggleContent = ({ toggler, content }) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n  const show = () => setIsVisible(true);\r\n  const hide = () => setIsVisible(false);\r\n\r\n  return (\r\n    <>\r\n      {toggler(show)}\r\n      {isVisible && content(hide)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ToggleContent;\r\n","import { useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal');\r\n\r\nconst Modal = ({ children, hideModal }) => {\r\n  const containerDiv = document.createElement('div');\r\n\r\n  useEffect(() => {\r\n    modalRoot.appendChild(containerDiv);\r\n    function keyListener(e) {\r\n      if (e.keyCode === 27) {\r\n        hideModal();\r\n      }\r\n    }\r\n    document.addEventListener('keydown', keyListener);\r\n    return () => modalRoot.removeChild(containerDiv);\r\n  }, [containerDiv, hideModal]);\r\n\r\n  return createPortal(children, containerDiv);\r\n};\r\n\r\nexport default Modal;\r\n","import React, { useState } from 'react';\r\nimport { Button, TextField } from '@material-ui/core';\r\nimport { useAuth } from '../hooks/useAuth.jsx';\r\n\r\nexport default function LogIn({ hideModal }) {\r\n  const {\r\n    user: { isLoggedIn },\r\n    signIn,\r\n    signOut\r\n  } = useAuth();\r\n  const init = { username: '', password: '' };\r\n  const [loginCredentials, setLoginCredentials] = useState(init);\r\n\r\n  const handleLogout = () => {\r\n    signOut();\r\n    hideModal();\r\n  };\r\n\r\n  const handleLogin = (user, pass) => {\r\n    signIn(user, pass);\r\n    hideModal();\r\n  };\r\n\r\n  const performLogin = (evt) => {\r\n    evt.preventDefault();\r\n    handleLogin(loginCredentials.username, loginCredentials.password);\r\n  };\r\n  const onChange = (evt) => {\r\n    setLoginCredentials({\r\n      ...loginCredentials,\r\n      [evt.target.id]: evt.target.value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {isLoggedIn ? (\r\n        <LoggedIn handleLogout={handleLogout} />\r\n      ) : (\r\n        <LoggedOut change={onChange} performLogin={performLogin} />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction LoggedOut({ performLogin, change }) {\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <form onChange={change}>\r\n        <TextField\r\n          size='small'\r\n          id='username'\r\n          label='User Name'\r\n          variant='outlined'\r\n        />\r\n        <TextField\r\n          size='small'\r\n          id='password'\r\n          label='Password'\r\n          variant='outlined'\r\n        />\r\n        <Button variant='outlined' color='primary' onClick={performLogin}>\r\n          Login\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction LoggedIn({ handleLogout }) {\r\n  return (\r\n    <div>\r\n      <h2>Logout</h2>\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ToggleContent from './utils/ToggleContent.jsx';\r\nimport Modal from './utils/Modal.jsx';\r\nimport LogIn from '../components/Login.jsx';\r\nimport { Button } from '@material-ui/core';\r\nimport { useAuth } from '../hooks/useAuth.jsx';\r\n\r\nconst LoginModal = ({ togglerColor = 'default' }) => {\r\n  const {\r\n    user: { isLoggedIn }\r\n  } = useAuth();\r\n\r\n  // Toggler\r\n  const loginBtn = (show) => {\r\n    const btnTxt = isLoggedIn ? 'Logout' : 'Login';\r\n    return (\r\n      <Button variant='contained' color={togglerColor} onClick={show}>\r\n        {btnTxt}\r\n      </Button>\r\n    );\r\n  };\r\n\r\n  // Content\r\n  const modalContent = (hide) => {\r\n    return (\r\n      <Modal hideModal={hide}>\r\n        <LogIn hideModal={hide} />\r\n      </Modal>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ToggleContent\r\n      toggler={(show) => loginBtn(show)}\r\n      content={(hide) => modalContent(hide)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LoginModal;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { AppBar, IconButton, Typography, Toolbar } from '@material-ui/core';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport { useAuth } from '../hooks/useAuth.jsx';\r\nimport LoginModal from './LoginModal.jsx';\r\n\r\nexport default function Header() {\r\n  const {\r\n    user: { isLoggedIn, name, roles, authenticateRole }\r\n  } = useAuth();\r\n\r\n  return (\r\n    <AppBar position='static'>\r\n      <Toolbar variant='dense'>\r\n        <IconButton\r\n          edge='start'\r\n          component={NavLink}\r\n          exact\r\n          to='/'\r\n          color='inherit'\r\n          aria-label='home'\r\n        >\r\n          <HomeIcon />\r\n        </IconButton>\r\n        {isLoggedIn && (\r\n          <IconButton component={NavLink} to='/jokes' color='inherit'>\r\n            Jokes\r\n          </IconButton>\r\n        )}\r\n        {authenticateRole('admin') && (\r\n          <IconButton component={NavLink} to='/scrape' color='inherit'>\r\n            Scrape\r\n          </IconButton>\r\n        )}\r\n        <IconButton component={NavLink} to='/content3' color='inherit'>\r\n          Content 3\r\n        </IconButton>\r\n        {isLoggedIn && (\r\n          <Typography style={{ flex: 1 }} variant='h6' noWrap>\r\n            username: {name}, roles: {roles.join(', ')}\r\n          </Typography>\r\n        )}\r\n        <LoginModal />\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function NoMatch() {\r\n  return <h1>No pages matches this path</h1>;\r\n}\r\n","import React, { useReducer, createContext } from \"react\";\r\nimport id from \"uuid/v4\";\r\n\r\nexport const StateContext = createContext();\r\n\r\nconst STATE_ADD = \"STATE_ADD\";\r\nconst STATE_REMOVE = \"STATE_REMOVE\";\r\nconst STATE_UNDO = \"STATE_UNDO\";\r\nconst STATE_REDO = \"STATE_REDO\";\r\n\r\nconst initialState = [\r\n  { id: id(), name: \"test1\", age: 20, email: \"hej@hej1.dk\" },\r\n  { id: id(), name: \"test2\", age: 21, email: \"hej@hej2.dk\" },\r\n  { id: id(), name: \"test3\", age: 22, email: \"hej@hej3.dk\" }\r\n];\r\n\r\nconst defaultState = {\r\n  past: [],\r\n  present: initialState,\r\n  future: []\r\n};\r\n\r\nconst reducer = (state = defaultState, action) => {\r\n  if (action.type === STATE_ADD) {\r\n    const newPresent = [\r\n      {\r\n        id: id(),\r\n        ...action.payload\r\n      },\r\n      ...state.present\r\n    ];\r\n    return {\r\n      past: [state.present, ...state.past],\r\n      present: newPresent,\r\n      future: []\r\n    };\r\n  }\r\n\r\n  if (action.type === STATE_REMOVE) {\r\n    const newPresent = state.present.filter(\r\n      obj => obj.id !== action.payload.id\r\n    );\r\n    return {\r\n      past: [state.present, ...state.past],\r\n      present: newPresent,\r\n      future: []\r\n    };\r\n  }\r\n\r\n  if (action.type === STATE_UNDO) {\r\n    const [newPresent, ...newPast] = state.past;\r\n    return {\r\n      past: newPast,\r\n      present: newPresent,\r\n      future: [state.present, ...state.future]\r\n    };\r\n  }\r\n\r\n  if (action.type === STATE_REDO) {\r\n    const [newPresent, ...newFuture] = state.future;\r\n    return {\r\n      past: [state.present, ...state.past],\r\n      present: newPresent,\r\n      future: [...newFuture]\r\n    };\r\n  }\r\n  return state;\r\n};\r\n\r\nexport const StateProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(reducer, defaultState);\r\n  const stateObjects = state.present;\r\n  const isPast = !!state.past.length;\r\n  const isFuture = !!state.future.length;\r\n\r\n  const addState = stateObject => {\r\n    dispatch({\r\n      type: STATE_ADD,\r\n      payload: {\r\n        ...stateObject\r\n      }\r\n    });\r\n  };\r\n\r\n  const RemoveState = id => {\r\n    dispatch({\r\n      type: STATE_REMOVE,\r\n      payload: {\r\n        id\r\n      }\r\n    });\r\n  };\r\n\r\n  const undoState = () => {\r\n    dispatch({\r\n      type: STATE_UNDO\r\n    });\r\n  };\r\n\r\n  const redoState = () => {\r\n    dispatch({\r\n      type: STATE_REDO\r\n    });\r\n  };\r\n\r\n  const value = {\r\n    stateObjects,\r\n    addState,\r\n    RemoveState,\r\n    undoState,\r\n    redoState,\r\n    isPast,\r\n    isFuture\r\n  };\r\n  return (\r\n    <StateContext.Provider value={value}>{children}</StateContext.Provider>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { StateContext } from \"../contexts/StateContext\";\r\n\r\nexport default function Content3() {\r\n  const emptyObject = { name: \"\", age: 0, email: \"\" };\r\n  const [object, setObject] = useState(emptyObject);\r\n  const {\r\n    stateObjects,\r\n    addState,\r\n    RemoveState,\r\n    undoState,\r\n    redoState,\r\n    isPast,\r\n    isFuture\r\n  } = useContext(StateContext);\r\n\r\n  const handleChange = ({ target }) => {\r\n    setObject({ ...object, [target.id]: target.value });\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    addState(object);\r\n  };\r\n\r\n  const handleRemove = id => {\r\n    RemoveState(id);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h1>Content 3</h1>\r\n      <h2>Advanced State management</h2>\r\n      <button onClick={undoState} disabled={!isPast}>\r\n        Undo\r\n      </button>\r\n      <button onClick={redoState} disabled={!isFuture}>\r\n        Redo\r\n      </button>\r\n      <form>\r\n        <label>name</label>\r\n        <input\r\n          id=\"name\"\r\n          type=\"text\"\r\n          value={object.name}\r\n          onChange={handleChange}\r\n        />\r\n        <label>age</label>\r\n        <input\r\n          id=\"age\"\r\n          type=\"Number\"\r\n          value={object.age}\r\n          onChange={handleChange}\r\n        />\r\n        <label>email</label>\r\n        <input\r\n          id=\"email\"\r\n          type=\"text\"\r\n          value={object.email}\r\n          onChange={handleChange}\r\n        />\r\n        <br />\r\n        <button onClick={handleSubmit}>Add</button>\r\n      </form>\r\n      <ul>\r\n        {stateObjects.map((obj, index) => (\r\n          <React.Fragment key={obj.id}>\r\n            <li>\r\n              name: {obj.name}, age: {obj.age}, email:{obj.email}\r\n            </li>\r\n            <button\r\n              onClick={() => {\r\n                handleRemove(obj.id);\r\n              }}\r\n            >\r\n              Remove\r\n            </button>\r\n          </React.Fragment>\r\n        ))}\r\n      </ul>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport { backendUrl } from '../config/settings';\r\n\r\nconst useFetch = (url, opts) => {\r\n  const [response, setResponse] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const res = await fetch(`${backendUrl}${url}`, opts);\r\n        const json = await res.json();\r\n        setResponse(json);\r\n      } catch (err) {\r\n        setError(err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    if (url) {\r\n      fetchData();\r\n    }\r\n  }, []);\r\n\r\n  return { response, error, isLoading };\r\n};\r\n\r\nexport default useFetch;\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { apiUtils } from '../utils/apiUtils';\r\nimport useFetch from '../hooks/useFetch.jsx';\r\n\r\nexport default function Scrape() {\r\n  const opts = apiUtils.makeOptions('GET');\r\n  const { response, isLoading } = useFetch('/scrape', opts);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Backdrop open={true}>\r\n        <CircularProgress color='inherit' />\r\n      </Backdrop>\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <h1>Scrapes</h1>\r\n      {response &&\r\n        response.map((scrape) => (\r\n          <div key={scrape.url}>\r\n            <p>URL: {scrape.url}</p>\r\n            <p>Title: {scrape.title}</p>\r\n            <p>DivCount: {scrape.divCount}</p>\r\n            <p>BodyCount: {scrape.bodyCount}</p>\r\n            <br />\r\n          </div>\r\n        ))}\r\n    </>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { apiUtils } from '../utils/apiUtils';\r\nimport useFetch from '../hooks/useFetch.jsx';\r\n\r\nconst Jokes = () => {\r\n  const opts = apiUtils.makeOptions('GET');\r\n  const { response, isLoading } = useFetch('/jokes', opts);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Backdrop open={true}>\r\n        <CircularProgress color='inherit' />\r\n      </Backdrop>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h1>Jokes</h1>\r\n      {response && (\r\n        <>\r\n          <p>Joke1: {response.joke1}</p>\r\n          <p>Joke1 Reference: {response.joke1Reference}</p>\r\n          <br />\r\n          <p>Joke2: {response.joke2}</p>\r\n          <p>Joke2 Reference: {response.joke2Reference}</p>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Jokes;\r\n","import React from \"react\";\r\n\r\nexport default function Home() {\r\n  return <h1>Home</h1>;\r\n}\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { useAuth } from '../../hooks/useAuth.jsx';\r\n\r\nconst ProtectedRoute = ({ children, authenticatedRoles, ...rest }) => {\r\n  const {\r\n    user: { isLoggedIn, roles }\r\n  } = useAuth();\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        isLoggedIn && roles.some((r) => authenticatedRoles.indexOf(r) >= 0) ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/unauthorized',\r\n              state: { from: location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport LoginModal from './LoginModal.jsx';\r\n\r\nconst Unauthorized = () => {\r\n  return (\r\n    <>\r\n      <h1>Unauthorized - Please Login</h1>\r\n      <LoginModal togglerColor='primary' />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Unauthorized;\r\n","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport NoMatch from '../components/NoMatch.jsx';\r\nimport Content3 from '../components/Content3.jsx';\r\nimport Scrape from '../components/Scrape.jsx';\r\nimport Jokes from '../components/Jokes.jsx';\r\nimport Home from '../components/Home.jsx';\r\nimport ProtectedRoute from '../components/routes/ProtectedRoute.jsx';\r\nimport Unauthorized from '../components/Unauthorized.jsx';\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <Switch>\r\n      <Route exact path='/'>\r\n        <Home />\r\n      </Route>\r\n      <ProtectedRoute authenticatedRoles={['admin']} path='/jokes'>\r\n        <Jokes />\r\n      </ProtectedRoute>\r\n\r\n      <ProtectedRoute authenticatedRoles={['admin']} path='/scrape'>\r\n        <Scrape />\r\n      </ProtectedRoute>\r\n\r\n      <Route path='/content3'>\r\n        <Content3 />\r\n      </Route>\r\n      <Route path='/unauthorized'>\r\n        <Unauthorized />\r\n      </Route>\r\n      <Route>\r\n        <NoMatch />\r\n      </Route>\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from 'react';\r\nimport Header from './components/Header.jsx';\r\nimport Routes from './config/Routes.jsx';\r\nimport { Container } from '@material-ui/core/';\r\nimport ProvideAuth from './hooks/useAuth.jsx';\r\nimport { StateProvider } from './contexts/StateContext.jsx';\r\n\r\nfunction App() {\r\n  return (\r\n    <StateProvider>\r\n      <ProvideAuth>\r\n        <Header />\r\n        <Container maxWidth='lg'>\r\n          <Routes />\r\n        </Container>\r\n      </ProvideAuth>\r\n    </StateProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport './style.css';\r\n\r\nconst AppWithRouter = () => {\r\n  return (\r\n    <React.StrictMode>\r\n      <Router>\r\n        <App />\r\n      </Router>\r\n    </React.StrictMode>\r\n  );\r\n};\r\n\r\nReactDOM.render(<AppWithRouter />, document.getElementById('root'));\r\n"],"sourceRoot":""}